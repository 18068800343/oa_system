<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.ldxx.dao.MaterialPerformanceDao">
	<select id="selectmaterialPerformanceByStatus" resultType="clfbCgcontractPerformance">
		select *,c.sp_name from clfb_cgcontract_performance  a
		left join mode_status m on m.mode_id=a.p_id
		left join sourcing_purchasing c on c.sp_id=a.contract_yi 
		where m.status=#{status}
	</select>
	<insert id="addmaterialPerformanceSave" parameterType="clfbCgcontractPerformance">
		insert into clfb_cgcontract_performance(p_id,cg_contract,cg_no,cj_contract,cj_no,
		task_no,prj_person,contract_yi,fb_person,contract_money,provisional_money,settlement_money,
		settlement_desc,accumulative_payment_money,performance_grade,performance_desc,make_time)
		values(#{c.pId},#{c.cgContract},#{c.cgNo},#{c.cjContract},#{c.cjNo},#{c.taskNo},#{c.prjPerson},#{c.contractYi},
		#{c.fbPerson},#{c.contractMoney},#{c.provisionalMoney},#{c.settlementMoney},#{c.settlementDesc},#{c.accumulativePaymentMoney},#{c.performanceGrade},#{c.performanceDesc},now())
	</insert>
	
	<select id="selectmaterialPerformanceById" resultType="clfbCgcontractPerformance">
		select *,c.sp_name from clfb_cgcontract_performance  a
		left join sourcing_purchasing c on c.sp_id=a.contract_yi 
		where p_id=#{id}
	</select>
	
</mapper>