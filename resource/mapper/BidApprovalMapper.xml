<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.ldxx.dao.BidApprovalDao" >

	<select id="selectBidApproval" resultType="BidApproval">
		select * from bid_approval a
		left join mode_status b on a.ba_id=b.mode_id
		where status=#{status}
	</select>
	
	<select id="selectBidApprovalById" resultType="BidApproval">
		select * from bid_approval where ba_id=#{id}
	</select>
	
	<insert id="addBidApproval" parameterType="BidApproval">
		insert into bid_approval(ba_id,prj_name,prj_no,owner_unit,prj_type,bidder,pretrial_submission_time,field_time,pretender_meeting_time,
			submission_time,project_applicants,purchase_tender_personnel)
		values(#{ba.baId},#{ba.prjName},#{ba.prjNo},#{ba.ownerUnit},#{ba.prjType},#{ba.bidder},#{ba.pretrialSubmissionTime},#{ba.fieldTime}
			,#{ba.pretenderMeetingTime},#{ba.submissionTime},#{ba.projectApplicants},#{ba.purchaseTenderPersonnel})
	</insert>
	
	
	<select id="prjNocount" resultType="int">
		select count(1) from (select distinct prj_no from bid_approval) as a
	</select>
	
	<delete id="deleteBidApproval">
		delete from bid_approval where ba_id=#{id}
	</delete>
	
	<update id="updateBidApproval" parameterType="BidApproval">
		update bid_approval set 
		prj_name=#{ba.prjName},
		prj_no=#{ba.prjNo},
		owner_unit=#{ba.ownerUnit},
		prj_type=#{ba.prjType},
		bidder=#{ba.bidder},
		pretrial_submission_time=#{ba.pretrialSubmissionTime},
		field_time=#{ba.fieldTime},
		pretender_meeting_time=#{ba.pretenderMeetingTime},
		submission_time=#{ba.submissionTime},
		project_applicants=#{ba.projectApplicants},
		purchase_tender_personnel=#{ba.purchaseTenderPersonnel}
		where ba_id=#{ba.baId}
	</update>
	
	<select id="selectprjNameAndNo" resultType="BidApproval">
		select prj_name,prj_no,owner_unit,prj_type from bid_approval a left join mode_status b on a.ba_id=b.mode_id
		where status=#{status}
	</select>
	
	<select id="selectNoByName" resultType="BidApproval">
		select prj_no,prj_type,owner_unit from bid_approval where prj_name=#{name}
	</select>
	
	<select id="selectNameByNo" resultType="BidApproval">
		select prj_name,prj_type,owner_unit from bid_approval where prj_no=#{no}
	</select>

</mapper>