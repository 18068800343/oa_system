<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.ldxx.dao.AlreadySkInfoDao" >

	<!-- <insert id="addAlreadySkInfo">
		insert into already_sk_info(c_id,sk_id,prj_name,task_no,contract_name,contract_no,already_sk_money,all_sk_money,time,
		operator_person,years,yezhu,prj_start_time,prj_end_time,prj_leader,contract_money,contract_js_money,contract_sk_condition,
		fp_no,already_money,prj_jindu,back_desc,cdesc)
		values(#{as.cId},#{as.skId},#{as.prjName},#{as.taskNo},#{as.contractName},#{as.contractNo},#{as.alreadySkMoney},
		#{as.allSkMoney},now(),#{as.operatorPerson},#{as.years},#{as.yezhu},#{as.prjStartTime},#{as.prjEndTime},#{as.prjLeader}
		,#{as.contractMoney},#{as.contractJsMoney},#{as.contractSkCondition},#{as.fpNo},#{as.alreadyMoney},#{as.prjJindu}
		,#{as.backDesc},#{as.cdesc})
	</insert>
	
	<insert id="addAlreadySkOmInfo">
		insert into already_sk_om_info(ao_id,c_id,om_id,om_name,om_already_money,time,operator_person)
				values(#{skOmInfo.aoId}, #{skOmInfo.cId}, #{skOmInfo.omId},#{skOmInfo.omName},#{skOmInfo.omAlreadyMoney},
				now(),#{skOmInfo.operatorPerson})
	</insert>
	
	<select id="selectAlreadySkInfo" resultType="AlreadySkInfo">
		select * from already_sk_info 
	</select>
	
	<select id="selectAlreadySkOmInfoById" resultType="AlreadySkOmInfo">
		select * from already_sk_om_info  where c_id=#{id}
	</select>
	
	<select id="countallSkMoney" resultType="Float">
		select IFNULL(sum(all_sk_money),0)  from already_sk_info where task_no=#{taskNo} and contract_no=#{contractNo}
	</select>
	
	<select id="selectAlreadySkInfoByskId" resultType="AlreadySkInfo">
		select * from already_sk_info where sk_id=#{skId}
	</select>
	
	<delete id="deleteAlreadySkInfoByskId">
		delete from already_sk_info where sk_id=#{id}
	</delete>
	
	<delete id="deleteAlreadySkOmInfoById">
		delete from already_sk_om_info where c_id=#{cId}
	</delete> -->
	
	<select id="countquerenNo" resultType="int">
		select count(0) from (select distinct queren_no from already_renling) as a 
	</select>
	
	<insert id="addAlreadyRenling">
		insert into already_renling(r_id,queren_no,c_no,c_name,t_no,t_name,this_person,sk_no,kp_no,fp_no,
		main_department,fk_danwei,come_all_money,sk_queren_money,fp_desc,queren_date,daozhang_date,fp_money,kp_date)
		values(#{ar.rId},#{ar.querenNo},#{ar.cNo},#{ar.cName},#{ar.tNo},#{ar.tName},#{ar.thisPerson},#{ar.skNo},
		#{ar.kpNo},#{ar.fpNo},#{ar.mainDepartment},#{ar.fkDanwei},#{ar.comeAllMoney},#{ar.skQuerenMoney},#{ar.fpDesc},
		#{ar.querenDate},#{ar.daozhangDate},#{ar.fpMoney},#{ar.kpDate})
	</insert>

</mapper>