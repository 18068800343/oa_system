<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.ldxx.dao.OpeningRecordDao" >
	
	<select id="selectOpeningRecord" resultType="OpeningRecord">
		select * from opening_record a
		left join mode_status b on a.or_id=b.mode_id
		where status=#{status}
	</select>
	
	<insert id="addOpeningRecordSave" parameterType="OpeningRecord">
		insert into opening_record(or_id,prj_name,prj_no,prj_area,prj_type,owner_controlled_price,bid_evaluation_benchmark_price,
		bid_opening_time,percentage_fluctuation,winning_unit,bid_project_manager,bid_price,floating_medium_price,record_date,conclusion,unit_reason_bid)
		values(#{record.orId},#{record.prjName},#{record.prjNo},#{record.prjArea},#{record.prjType},#{record.ownerControlledPrice},
		#{record.bidEvaluationBenchmarkPrice},#{record.bidOpeningTime},#{record.percentageFluctuation},#{record.winningUnit},
		#{record.bidProjectManager},#{record.bidPrice},#{record.floatingMediumPrice},#{record.recordDate},#{record.conclusion},#{record.unitReasonBid})
	</insert>
	
	<update id="updateOpeningRecordSave" parameterType="OpeningRecord">
		update opening_record set 
		prj_name=#{record.prjName},
		prj_no=#{record.prjNo},
		prj_area=#{record.prjArea},
		prj_type=#{record.prjType},
		owner_controlled_price=#{record.ownerControlledPrice},
		bid_evaluation_benchmark_price=#{record.bidEvaluationBenchmarkPrice},
		bid_opening_time=#{record.bidOpeningTime},
		percentage_fluctuation=#{record.percentageFluctuation},
		winning_unit=#{record.winningUnit},
		bid_project_manager=#{record.bidProjectManager},
		bid_price=#{record.bidPrice},
		floating_medium_price=#{record.floatingMediumPrice},
		record_date=#{record.recordDate},
		conclusion=#{record.conclusion},
		unit_reason_bid=#{record.unitReasonBid}
		where or_id=#{record.orId}
	</update>
	
	<select id="selectOpeningRecordById" resultType="OpeningRecord">
		select * from opening_record where or_id=#{id}
	</select>

</mapper>